<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Project PANOPTES Data Explorer</title>

    <!-- update the version number as needed -->
    <script defer src="/__/firebase/7.7.0/firebase-app.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/7.7.0/firebase-auth.js"></script>
    <script defer src="/__/firebase/7.7.0/firebase-functions.js"></script>
    <script defer src="/__/firebase/7.7.0/firebase-firestore.js"></script>
    <script defer src="/__/firebase/7.7.0/firebase-storage.js"></script>
    <!-- initialize the SDK after all desired features are loaded -->
    <script defer src="/__/firebase/init.js"></script>
  </head>
  <body>
    <div id="message">
      <img src="https://projectpanoptes.org/img/logo.png" alt="">
      <code id="load">&hellip;</code>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // // 
        // // The Firebase SDK is initialized and available here!
        //
        // firebase.auth().onAuthStateChanged(user => { });
        // firebase.storage().ref('/path/to/ref').getDownloadURL().then(() => { });
        //
        // // 

        const Functions = firebase.functions();
        const db = firebase.firestore();
        if (location.hostname === "localhost") {
          Functions.useFunctionsEmulator("http://localhost:5001");
          db.settings({
            host: "localhost:8081",
            ssl: false
          });
        }        

        var getUnits = Functions.httpsCallable('getUnits');
          getUnits({}).then(function(result) {
            const units = result.data;
        })
        .catch(err => {
          console.error(err);
        });
      });
    </script>
  </body>
</html>
